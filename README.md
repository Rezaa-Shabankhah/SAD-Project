## معرفی کلی پروژه

این پروژه یک سیستم مدیریت انجمن دانشجویی است که بر مبنای framework های Django و MySQL طراحی شده است.



### مراحل اجرا :

ابتدا یک‌بار دستورات زیر را از دایرکتری اصلی فایل‌ها اجرا کنید :
```
pip install Django mysqlclient djangorestframework drf-yasg pymysql colorama
python3 -m venv venv
source venv/bin/activate
mysql -u root -p < university_association.sql
python manage.py migrate
python -c "import os; os.environ.setdefault('DJANGO_SETTINGS_MODULE','university_association_project.settings'); import django; django.setup(); from django.contrib.auth.models import User; User.objects.create_superuser('admin','admin@gmail.com','123')"
```

1. برای دسترسی به پنل ادمین، دستور زیر را اجرا کنید :
```
python manage.py runserver
```

  سپس به آدرس http://127.0.0.1:8000/admin/ رفته و مشخصات زیر را وارد کنید :
> ID: admin

> password: 123

2. برای دسترسی به رابط کاربری، دستور زیر را از دایکتری اصلی فایل‌ها اجرا کنید :
```
python cli.py
```

> توجه : پسورد دیتابیس در داخل کد 12345 ست شده است




## ساختار کلی پروژه

پروژه در دو بخش اصلی تقسیم شده است:
- **بخش Django**: شامل models و تنظیمات پایگاه داده
- **بخش CLI**: رابط کاربری متنی برای تعامل با سیستم


### معماری پایگاه داده

* جدول **Students**: اطلاعات پایه دانشجویان شامل شماره دانشجویی، نام و نقش
* جدول **Users**: اطلاعات حساب کاربری مرتبط با هر دانشجو
* جدول **Articles**: مقالات با سیستم تایید چندمرحله‌ای
* جدول **Announcements**: اعلانات عمومی انجمن
* جدول **Events**: رویدادها با قابلیت ثبت‌نام محدود
* جدول **Comments**: سیستم نظردهی عمومی


جدول Students به عنوان هسته اصلی عمل کرده و جدول Users به آن متصل است. مقالات از طریق جدول واسط article_authors امکان داشتن چندین نویسنده را دارند. رویدادها نیز از طریق event_registration با کاربران ارتباط برقرار می‌کنند.


### تنظیمات پایگاه داده:
پروژه از PyMySQL برای اتصال به MySQL استفاده می‌کند. در فایل `__init__.py` تنظیمات لازم برای شبیه‌سازی MySQLdb انجام شده است. پایگاه داده روی localhost با پورت استاندارد 3306 اجرا می‌شود.

### طراحی Models:
تمامی models با گزینه `managed = False` تعریف شده‌اند (برای عدم مداخله Django در مدیریت schema پایگاه داده). هر model دارای کلاس Meta مخصوص خود با تعیین نام جدول مربوطه در پایگاه داده است.

* مدل **Student**: دارای فیلد role با انواع STUDENT، MEMBER و ADMIN
* مدل **Article**: دارای status field برای مدیریت فرآیند تایید
* مدل **Comment**: از طریق target_type و target_id امکان کامنت روی انواع مختلف محتوا به شکل `Polimorphic`
* مدل **Event**: دارای فیلدهای capacity و registered_count برای مدیریت ظرفیت



## رابط کاربری Command Line

فرآیند ورود دو مرحله‌ای طراحی شده که ابتدا شماره دانشجویی بررسی می‌شود. اگر کاربر قبلاً ثبت‌نام نکرده باشد، امکان ایجاد حساب جدید ارائه می‌شود.

پس از ورود موفق، کاربر به منوی اصلی دسترسی پیدا می‌کند که شامل:
* مشاهده و مدیریت اعلانات
* مطالعه و درخواست مقالات
* مشاهده و ثبت‌نام در رویدادها
* پنل مدیریت (فقط برای ادمین‌ها)

#### بخش اعلانات:
کاربران با نقش MEMBER یا ADMIN می‌توانند اعلان جدید ایجاد کنند. همه کاربران قابلیت مشاهده اعلانات را دارند. سیستم امکان ویرایش و حذف اعلانات موجود را نیز فراهم می‌کند.

#### بخش مقالات:
مقالات دارای سیستم تایید هستند. کاربران عادی می‌توانند درخواست انتشار مقاله دهند که با status معلق ثبت می‌شود. ادمین‌ می‌تواند مستقیماً مقاله تایید شده منتشر کند یا درخواست‌های معلق را بررسی و تایید یا رد کند.

#### بخش رویدادها:
رویدادها دارای سیستم ثبت‌نام با ظرفیت محدود هستند. کاربران می‌توانند در رویدادهای مختلف شرکت کنند و تعداد ثبت‌نام‌ها به صورت خودکار به‌روزرسانی می‌شود. ادمین‌ها قابلیت ایجاد، ویرایش و حذف رویدادها را دارند.



### پنل مدیریت

ادمین‌ها دسترسی به پنل مدیریت دارند که شامل موارد زیر است:
- **مشاهده لیست کاربران**: نمایش تمام کاربران ثبت‌نام شده با نقش‌شان
- **بررسی درخواست‌های مقالات**: مشاهده و تایید یا رد مقالات معلق
- **مشاهده شرکت‌کنندگان رویدادها**: لیست افراد ثبت‌نام شده در هر رویداد



## نکات فنی پیاده‌سازی

* تابع `()get_conn` برای برقراری اتصال مرکزی با پایگاه داده طراحی شده است. این تابع از DictCursor استفاده می‌کند که نتایج را به صورت dictionary بازمی‌گرداند.
> 
* کد از parameterized queries برای جلوگیری از SQL injection استفاده می‌کند. validation ورودی‌ها در سطح application انجام می‌شود و کلیدهای خارجی روابط جداول را حفظ می‌کنند.
> 
* سیستم شامل مکانیزم‌های پایه‌ای برای مدیریت خطا است، از جمله بررسی وجود رکوردها قبل از انجام عملیات و catch کردن exception هایی مانند duplicate key errors.


